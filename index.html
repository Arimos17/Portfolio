---
---

{% assign p = site.data.portfolio %}

<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ p.seo.title | default: p.branding.name }}</title>

  <style>
    :root{
      --bg1: {{ p.branding.theme.colors.background_from }};
      --bg2: {{ p.branding.theme.colors.background_to }};
      --surface: {{ p.branding.theme.colors.surface }};
      --surface2: {{ p.branding.theme.colors.surface_2 }};
      --text: {{ p.branding.theme.colors.text }};
      --muted: {{ p.branding.theme.colors.muted }};
      --border: {{ p.branding.theme.colors.border }};
      --primary: {{ p.branding.theme.colors.primary }};
      --secondary: {{ p.branding.theme.colors.secondary }};
      --radius: {{ p.branding.theme.layout.card_radius_px }}px;
      --maxw: {{ p.branding.theme.layout.max_width_px }}px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: {{ p.branding.theme.typography.font_family }};
      color: var(--text);
      background:
        radial-gradient(1100px 520px at 15% 12%, color-mix(in srgb, var(--primary) 22%, transparent), transparent 60%),
        radial-gradient(900px 520px at 85% 10%, color-mix(in srgb, var(--secondary) 18%, transparent), transparent 62%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      min-height:100vh;
    }
    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--maxw); margin:0 auto; padding:24px;}

    .card{
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(15,23,42,0.55);
      box-shadow: 0 14px 40px rgba(0,0,0,0.28);
    }
    .pad{padding:18px}
    .muted{color:var(--muted)}

    /* NAV */
    .nav{
      position: sticky; top: 12px; z-index: 10;
      border-radius: 16px;
      background: rgba(10,16,28,0.60);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255,255,255,0.10);
    }
    .nav .inner{
      display:flex; align-items:center; justify-content:space-between;
      gap:14px; padding:14px 18px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width: 0;
    }
    .avatar{
      width:42px;
      height:42px;
      border-radius: 14px;
      object-fit: cover;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      flex: 0 0 auto;
    }
    .brand-text{min-width:0}
    .brand b{display:block; font-size:14px; line-height:1.1}
    .brand span{
      display:block;
      font-size:12px;
      color:rgba(229,231,235,0.70);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 56vw;
    }

    .right{display:flex; gap:10px; flex-wrap:wrap; align-items:center}

    .pill{
      padding:10px 12px; border-radius:999px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.06);
      font-size: 13px;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
    }
    .pill:hover{
      transform: translateY(-1px);
      border-color: color-mix(in srgb, var(--secondary) 55%, transparent);
      background: color-mix(in srgb, var(--secondary) 14%, transparent);
    }
    .pill.primary{
      border-color: color-mix(in srgb, var(--primary) 60%, transparent);
      background: color-mix(in srgb, var(--primary) 18%, transparent);
    }

    /* HEADER */
    .header{margin-top:16px}
    .header h1{margin:0; font-size:26px; letter-spacing:.2px}
    .header p{margin:6px 0 0; color:rgba(229,231,235,0.70); font-size:13px}

    /* PROJECT LIST */
    .proj{
      margin-top:16px;
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
    }

    .proj-card{padding:16px}
    .proj-title{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
    }
    .proj-title b{font-size:18px}
    .stack{font-size:12px; color:rgba(229,231,235,0.70); margin-top:8px}
    .desc{margin-top:10px; font-size:13px; color: rgba(230,237,243,0.92); max-width: 980px;}
    .chips{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px}
    .chip{
      font-size:12px; padding:6px 10px; border-radius:999px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.05);
    }

    /* SLIDER */
    .slider{
      margin-top:14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.18);
      overflow:hidden;
      position: relative;
    }
    .slides{
      display:flex;
      transition: transform .35s ease;
      will-change: transform;
      touch-action: pan-y;
      z-index: 1;
    }
    .slide{min-width: 100%; display:flex; align-items:center; justify-content:center;}
    .slide img{
      width: 100%;
      height: clamp(380px, 62vh, 720px); /* un poco más grande */
      object-fit: contain;
      background: rgba(0,0,0,0.18);
      display:block;
      user-select:none;
      -webkit-user-drag: none;
    }

    .navbtn{
      position:absolute;
      top:50%;
      transform: translateY(-50%);
      width:46px; height:46px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,0.14);
      background: rgba(10,16,28,0.62);
      backdrop-filter: blur(10px);
      color: var(--text);
      cursor:pointer;
      display:flex; align-items:center; justify-content:center;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      user-select:none;
      z-index: 5;
      pointer-events: auto;
    }
    .navbtn:hover{
      transform: translateY(-50%) scale(1.03);
      border-color: color-mix(in srgb, var(--secondary) 60%, transparent);
      background: color-mix(in srgb, var(--secondary) 14%, transparent);
    }
    .navbtn.prev{left:12px}
    .navbtn.next{right:12px}

    .dots{
      position:absolute;
      left:0; right:0;
      bottom:10px;
      display:flex;
      justify-content:center;
      gap:8px;
      padding: 0 12px;
      z-index: 5;
      pointer-events:auto;
    }
    .dot{
      width:8px; height:8px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.10);
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    .dot.active{
      background: color-mix(in srgb, var(--secondary) 70%, transparent);
      border-color: color-mix(in srgb, var(--secondary) 80%, transparent);
      transform: scale(1.15);
    }

    footer{
      margin: 18px 0 6px;
      color: rgba(229,231,235,0.70);
      font-size:12px;
      text-align:center;
    }

    @media (max-width: 920px){
      .slide img{height: 56vh}
      .navbtn{width:42px;height:42px}
      .brand span{max-width: 60vw;}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="nav">
      <div class="inner">
        <div class="brand">
          {% if p.branding.assets and p.branding.assets.avatar %}
            <img class="avatar"
                 src="{{ p.branding.assets.avatar | relative_url }}"
                 alt="Foto de perfil"
                 onerror="this.style.display='none'">
          {% endif %}

          <div class="brand-text">
            <b>{{ p.branding.name }}</b>
            <span>{{ p.branding.headline }} · {{ p.branding.location }}</span>
          </div>
        </div>

        <div class="right">
          <a class="pill" href="{{ p.contact.github_url }}" target="_blank" rel="noopener">GitHub</a>

          {% assign cv_url = "" %}
          {% if p.about and p.about.ctas %}
            {% for c in p.about.ctas %}
              {% if c.label contains "CV" %}
                {% assign cv_url = c.url %}
              {% endif %}
            {% endfor %}
          {% endif %}

          {% if cv_url != "" %}
            <a class="pill primary" href="{{ cv_url | relative_url }}" target="_blank" rel="noopener">Ver CV (PDF)</a>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="header">
      <h1>Proyectos</h1>
    </div>

    <div class="proj">
      {% for pr in p.projects.featured limit: p.projects.featured_limit %}
        <div class="card proj-card">
          <div class="proj-title">
            <b>{{ pr.name }}</b>
            <!--<a class="pill" href="{{ pr.repo_url }}" target="_blank" rel="noopener">Ver repo</a>
            {% if pr.links and pr.links.demo and pr.links.demo != "" %}
              <a class="pill" href="{{ pr.links.demo }}" target="_blank" rel="noopener">Demo</a>
            {% endif %}-->
          </div>

          <div class="stack">{{ pr.type }} · {{ pr.stack | join: " · " }}</div>
          <div class="desc">{{ pr.short }}</div>

          {% if pr.badges %}
            <div class="chips">
              {% for b in pr.badges %}
                <span class="chip">{{ b }}</span>
              {% endfor %}
            </div>
          {% endif %}

          {% if pr.media and pr.media.screenshots %}
            <div class="slider" data-slider>
              <div class="slides" data-track>
                {% for s in pr.media.screenshots %}
                  <div class="slide">
                    <img src="{{ s | relative_url }}" alt="Screenshot {{ pr.name }} {{ forloop.index }}">
                  </div>
                {% endfor %}
              </div>

              <div class="navbtn prev" data-action="prev" role="button" aria-label="Anterior">◀</div>
              <div class="navbtn next" data-action="next" role="button" aria-label="Siguiente">▶</div>

              <div class="dots" aria-label="Indicadores">
                {% for s in pr.media.screenshots %}
                  <div class="dot {% if forloop.first %}active{% endif %}" data-dot="{{ forloop.index0 }}"></div>
                {% endfor %}
              </div>
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>

    <footer>{{ p.footer.small_print }}</footer>
  </div>

  <script>
    (function(){
      const sliders = Array.from(document.querySelectorAll('[data-slider]'));

      sliders.forEach(slider => {
        const track = slider.querySelector('[data-track]');
        const slides = Array.from(track.querySelectorAll('.slide'));
        const prevBtn = slider.querySelector('[data-action="prev"]');
        const nextBtn = slider.querySelector('[data-action="next"]');
        const dots = Array.from(slider.querySelectorAll('.dot'));

        let index = 0;

        function setActiveDot(i){
          dots.forEach((d, di) => d.classList.toggle('active', di === i));
        }

        function goTo(i){
          index = Math.max(0, Math.min(i, slides.length - 1));
          track.style.transform = `translateX(${-index * 100}%)`;
          setActiveDot(index);
        }

        // Flechas
        prevBtn && prevBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          goTo(index - 1);
        });
        nextBtn && nextBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          goTo(index + 1);
        });

        // Dots
        dots.forEach(d => {
          d.addEventListener('click', (e) => {
            e.stopPropagation();
            goTo(Number(d.dataset.dot || 0));
          });
        });

        // Swipe solo sobre el track (no botones/dots)
        let startX = 0;
        let currentX = 0;
        let dragging = false;

        track.addEventListener('pointerdown', (e) => {
          if (e.target.closest('.navbtn') || e.target.closest('.dot')) return;
          dragging = true;
          startX = e.clientX;
          currentX = startX;
          track.setPointerCapture(e.pointerId);
        });

        track.addEventListener('pointermove', (e) => {
          if(!dragging) return;
          currentX = e.clientX;
        });

        track.addEventListener('pointerup', () => {
          if(!dragging) return;
          dragging = false;
          const diff = currentX - startX;
          const threshold = 45;
          if(diff > threshold) goTo(index - 1);
          else if(diff < -threshold) goTo(index + 1);
        });

        track.addEventListener('pointercancel', () => { dragging = false; });

        // Teclas
        slider.tabIndex = 0;
        slider.addEventListener('keydown', (e) => {
          if(e.key === 'ArrowLeft') goTo(index - 1);
          if(e.key === 'ArrowRight') goTo(index + 1);
        });

        goTo(0);
      });
    })();
  </script>
</body>
</html>
