---
---

{% assign p = site.data.portfolio %}

<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ p.seo.title | default: p.branding.name }}</title>

  <style>
    :root{
      --bg1: {{ p.branding.theme.colors.background_from }};
      --bg2: {{ p.branding.theme.colors.background_to }};
      --surface: {{ p.branding.theme.colors.surface }};
      --text: {{ p.branding.theme.colors.text }};
      --muted: {{ p.branding.theme.colors.muted }};
      --border: {{ p.branding.theme.colors.border }};
      --primary: {{ p.branding.theme.colors.primary }};
      --secondary: {{ p.branding.theme.colors.secondary }};
      --radius: {{ p.branding.theme.layout.card_radius_px }}px;
      --maxw: {{ p.branding.theme.layout.max_width_px }}px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: {{ p.branding.theme.typography.font_family }};
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(0,212,255,0.18), transparent 60%),
        radial-gradient(900px 500px at 80% 15%, rgba(11,95,255,0.22), transparent 62%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      min-height:100vh;
    }
    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--maxw); margin:0 auto; padding:24px;}

    .card{
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.06);
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    }
    .pad{padding:18px}
    .muted{color:var(--muted)}

    /* NAV */
    .nav{
      position: sticky; top: 12px; z-index: 10;
      background: rgba(10,16,28,0.55);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 16px;
    }
    .nav .inner{
      display:flex; align-items:center; justify-content:space-between;
      gap:14px; padding:14px 18px;
    }
    .brand b{display:block; font-size:14px; line-height:1.1}
    .brand span{font-size:12px; color:var(--muted)}
    .right{display:flex; gap:10px; flex-wrap:wrap; align-items:center}

    .pill{
      padding:10px 12px; border-radius:999px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.06);
      font-size: 13px;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
    }
    .pill:hover{
      transform: translateY(-1px);
      border-color: rgba(0,212,255,0.45);
      background: rgba(0,212,255,0.08);
    }
    .pill.primary{
      border-color: rgba(11,95,255,0.55);
      background: rgba(11,95,255,0.12);
    }

    /* PAGE TITLE */
    .header{
      margin-top:16px;
      display:flex; align-items:flex-end; justify-content:space-between;
      gap:16px;
    }
    .header h1{
      margin:0;
      font-size:26px;
      letter-spacing:.2px;
    }
    .header p{margin:6px 0 0; color:var(--muted); font-size:13px}

    /* PROJECT LIST */
    .proj{
      margin-top:16px;
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
    }

    .proj-card{padding:16px}
    .proj-top{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .proj-title{
      display:flex; gap:10px; align-items:center; flex-wrap:wrap;
    }
    .proj-title b{font-size:18px}
    .stack{font-size:12px; color:var(--muted); margin-top:6px}
    .desc{margin-top:10px; font-size:13px; color: rgba(230,237,243,0.92); max-width: 900px;}
    .chips{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px}
    .chip{
      font-size:12px; padding:6px 10px; border-radius:999px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.05);
    }

    /* SLIDER */
    .slider{
      margin-top:14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.18);
      overflow:hidden;
      position: relative;
    }
    .slides{
      display:flex;
      transition: transform .35s ease;
      will-change: transform;
      touch-action: pan-y;
    }
    .slide{
      min-width: 100%;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,0.18);
    }
    .slide img{
      width: 100%;
      height: clamp(340px, 56vh, 620px);
      object-fit: contain;   /* se ve completa */
      background: rgba(0,0,0,0.20);
      display:block;
    }

    .navbtn{
      position:absolute;
      top:50%;
      transform: translateY(-50%);
      width:44px; height:44px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,0.14);
      background: rgba(10,16,28,0.55);
      backdrop-filter: blur(10px);
      color: var(--text);
      cursor:pointer;
      display:flex; align-items:center; justify-content:center;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      user-select:none;
    }
    .navbtn:hover{
      transform: translateY(-50%) scale(1.03);
      border-color: rgba(0,212,255,0.45);
      background: rgba(0,212,255,0.10);
    }
    .navbtn.prev{left:12px}
    .navbtn.next{right:12px}

    .dots{
      position:absolute;
      left:0; right:0;
      bottom:10px;
      display:flex;
      justify-content:center;
      gap:8px;
      padding: 0 12px;
    }
    .dot{
      width:8px; height:8px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.12);
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
    }
    .dot.active{
      background: rgba(0,212,255,0.55);
      border-color: rgba(0,212,255,0.65);
      transform: scale(1.15);
    }

    footer{
      margin: 18px 0 6px;
      color: var(--muted);
      font-size:12px;
      text-align:center;
    }

    @media (max-width: 920px){
      .slide img{height: 52vh}
      .navbtn{width:40px;height:40px}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <!-- NAV -->
    <div class="nav card">
      <div class="inner">
        <div class="brand">
          <b>{{ p.branding.name }}</b>
          <span>{{ p.branding.headline }} · {{ p.branding.location }}</span>
        </div>

        <div class="right">
          <a class="pill" href="{{ p.contact.github_url }}" target="_blank" rel="noopener">GitHub</a>

          {% assign cv_url = "" %}
          {% if p.about and p.about.ctas %}
            {% for c in p.about.ctas %}
              {% if c.label contains "CV" %}
                {% assign cv_url = c.url %}
              {% endif %}
            {% endfor %}
          {% endif %}

          {% if cv_url != "" %}
            <a class="pill primary" href="{{ cv_url | relative_url }}" target="_blank" rel="noopener">Ver CV (PDF)</a>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- HEADER -->
    <div class="header">
      <div>
        <h1>Proyectos</h1>
        <p class="muted">Seleccionados desde GitHub. Capturas en formato slider para ver el flujo completo.</p>
      </div>
    </div>

    <!-- PROJECTS -->
    <div class="proj">
      {% for pr in p.projects.featured limit: p.projects.featured_limit %}
        <div class="card proj-card">

          <div class="proj-top">
            <div>
              <div class="proj-title">
                <b>{{ pr.name }}</b>
                <a class="pill" href="{{ pr.repo_url }}" target="_blank" rel="noopener">Ver repo</a>
                {% if pr.links and pr.links.demo and pr.links.demo != "" %}
                  <a class="pill" href="{{ pr.links.demo }}" target="_blank" rel="noopener">Demo</a>
                {% endif %}
              </div>

              <div class="stack">{{ pr.type }} · {{ pr.stack | join: " · " }}</div>
              <div class="desc">{{ pr.short }}</div>

              {% if pr.badges %}
                <div class="chips">
                  {% for b in pr.badges %}
                    <span class="chip">{{ b }}</span>
                  {% endfor %}
                </div>
              {% endif %}
            </div>
          </div>

          {% if pr.media and pr.media.screenshots %}
            {% assign slider_id = "slider_" | append: forloop.index0 %}

            <div class="slider" id="{{ slider_id }}">
              <div class="slides">
                {% for s in pr.media.screenshots %}
                  <div class="slide">
                    <img src="{{ s | relative_url }}" alt="Screenshot {{ pr.name }} {{ forloop.index }}">
                  </div>
                {% endfor %}
              </div>

              <div class="navbtn prev" data-action="prev" aria-label="Anterior">◀</div>
              <div class="navbtn next" data-action="next" aria-label="Siguiente">▶</div>

              <div class="dots" aria-label="Indicadores">
                {% for s in pr.media.screenshots %}
                  <div class="dot {% if forloop.first %}active{% endif %}" data-dot="{{ forloop.index0 }}"></div>
                {% endfor %}
              </div>
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>

    <footer>
      {{ p.footer.small_print }}
    </footer>
  </div>

  <script>
    (function(){
      const sliders = Array.from(document.querySelectorAll('.slider'));

      sliders.forEach(slider => {
        const track = slider.querySelector('.slides');
        const slides = Array.from(slider.querySelectorAll('.slide'));
        const prevBtn = slider.querySelector('.navbtn.prev');
        const nextBtn = slider.querySelector('.navbtn.next');
        const dots = Array.from(slider.querySelectorAll('.dot'));

        let index = 0;
        let startX = 0;
        let currentX = 0;
        let dragging = false;

        function setActiveDot(i){
          dots.forEach((d, di) => d.classList.toggle('active', di === i));
        }

        function goTo(i){
          index = Math.max(0, Math.min(i, slides.length - 1));
          track.style.transform = `translateX(${-index * 100}%)`;
          setActiveDot(index);
        }

        prevBtn && prevBtn.addEventListener('click', () => goTo(index - 1));
        nextBtn && nextBtn.addEventListener('click', () => goTo(index + 1));

        dots.forEach(d => {
          d.addEventListener('click', () => {
            const i = Number(d.dataset.dot || 0);
            goTo(i);
          });
        });

        // Swipe (mobile/trackpad)
        slider.addEventListener('pointerdown', (e) => {
          dragging = true;
          startX = e.clientX;
          currentX = startX;
          slider.setPointerCapture(e.pointerId);
        });

        slider.addEventListener('pointermove', (e) => {
          if(!dragging) return;
          currentX = e.clientX;
        });

        slider.addEventListener('pointerup', () => {
          if(!dragging) return;
          dragging = false;
          const diff = currentX - startX;
          const threshold = 40;
          if(diff > threshold) goTo(index - 1);
          else if(diff < -threshold) goTo(index + 1);
        });

        // Keyboard when slider is focused
        slider.tabIndex = 0;
        slider.addEventListener('keydown', (e) => {
          if(e.key === 'ArrowLeft') goTo(index - 1);
          if(e.key === 'ArrowRight') goTo(index + 1);
        });

        goTo(0);
      });
    })();
  </script>
</body>
</html>
